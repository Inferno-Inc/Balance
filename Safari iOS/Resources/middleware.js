(()=>{function e(){""!==window.ethereum.address&&t(),window.ethereum.on("accountsChanged",(()=>{t()}))}function t(){window.ethereum.request({method:"eth_requestAccounts"}).then((e=>{const t=new XMLHttpRequest;t.onload=()=>{const n=t.response,s=JSON.parse(n);window.postMessage({direction:"from-middleware-script",subject:"updateBar",message:JSON.stringify({address:e[0],balance:s.result})},"*")},t.onerror=()=>{console.log("Request failed.")},t.open("POST",window.ethereum.rpc.rpcUrl,!0),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify({jsonrpc:"2.0",method:"eth_getBalance",params:[e[0],"latest"],id:1}))}))}if(void 0!==window.ethereum)e();else{const t=setInterval((()=>{void 0!==window.ethereum&&(clearInterval(t),e())}),1e3)}})();
//# sourceMappingURL=middleware.js.map
